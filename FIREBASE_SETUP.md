# Campus Eats - Firebase Integration Guide

## Overview
This application has been fully integrated with Firebase v12.5.0, including:
- Firebase Authentication (email/password)
- Firebase Realtime Database
- Firebase Analytics

## Database Structure

### User Registration
```
User_Registration/
  └── {UniqueAutoGeneratedID}/
      ├── name: string
      ├── email: string
      ├── password: string (Note: In production, never store passwords in plain text)
      ├── registeredAt: timestamp
      └── userId: string (Firebase Auth UID)
```

### Tracking Data
```
Tracking/
  └── {UniqueAutoGeneratedID}/
      ├── CurrentUserID: string
      ├── userData: object
      └── timestamp: string
```

### User Profile Data
```
Users/
  └── {userId}/
      ├── Personal Information/
      │   ├── name: string
      │   ├── email: string
      │   ├── age: string
      │   ├── gender: string
      │   ├── height: string
      │   └── weight: string
      ├── Daily Nutrition Goals/
      │   ├── calories: string
      │   ├── protein: string
      │   ├── carbs: string
      │   └── fats: string
      └── Meals/
          └── {mealId}/
              ├── name: string
              ├── calories: number
              ├── protein: number
              ├── carbs: number
              ├── fats: number
              └── date: timestamp
```

## Firebase Configuration

The Firebase configuration is located in `js/firebase-config.js` and uses the provided credentials:
- API Key: AIzaSyBQ_8502Pbo4AOwYbkGzzEgT7toAycf_EA
- Project ID: campus-eats-e51d0
- Database URL: https://campus-eats-e51d0-default-rtdb.firebaseio.com/

## Required Firebase Setup

### 1. Enable Authentication
1. Go to Firebase Console → Authentication
2. Enable "Email/Password" sign-in method

### 2. Configure Realtime Database Rules
Go to Firebase Console → Realtime Database → Rules and set:

```json
{
  "rules": {
    "User_Registration": {
      ".read": "auth != null",
      ".write": "auth != null"
    },
    "Tracking": {
      ".read": "auth != null",
      ".write": "auth != null"
    },
    "Users": {
      "$uid": {
        ".read": "$uid === auth.uid",
        ".write": "$uid === auth.uid"
      }
    }
  }
}
```

### 3. Enable Realtime Database
1. Go to Firebase Console → Realtime Database
2. Create database (if not already created)
3. Choose your region
4. Start in test mode (then update rules as above)

## Features Implemented

### Authentication
- ✅ User registration with email/password
- ✅ User login with email/password
- ✅ Session management
- ✅ Automatic redirect for authenticated/unauthenticated users
- ✅ Logout functionality

### Data Storage
- ✅ Registration data stored in `User_Registration`
- ✅ Tracking entries created on login/registration
- ✅ Profile data stored under user's unique ID
- ✅ Meals stored under user's unique ID
- ✅ Real-time data synchronization

### User Interface
- ✅ Registration form with validation
- ✅ Login form with validation
- ✅ Dashboard with navigation
- ✅ Profile page with Personal Information and Daily Nutrition Goals
- ✅ Tracking page with meal logging and charts

## File Structure

```
├── index.html (Login/Register page)
├── dashboard.html
├── profile.html
├── tracking.html
├── recipes.html
├── js/
│   ├── firebase-config.js (Firebase initialization)
│   ├── common.js (Shared Firebase functions)
│   ├── login.js (Authentication logic)
│   ├── profile.js (Profile management)
│   ├── tracking.js (Meal tracking)
│   └── dashboard.js
└── css/
    └── (Styling files)
```

## Usage

1. Open `index.html` in a web browser
2. Register a new account or login with existing credentials
3. After login, you'll be redirected to the dashboard
4. Navigate to Profile to set up your personal information and nutrition goals
5. Navigate to Tracking to log meals and view your nutrition data

## Important Notes

1. **Password Storage**: The current implementation stores passwords in plain text in the Realtime Database. In a production environment, you should:
   - Never store passwords in the database
   - Rely solely on Firebase Authentication for password management
   - Remove the password field from User_Registration storage

2. **Database Rules**: Make sure to configure proper security rules in Firebase Console to protect user data.

3. **HTTPS**: For production, serve the application over HTTPS as required by Firebase.

4. **Error Handling**: The application includes error handling for common Firebase errors and displays user-friendly messages.

## Testing

To test the application:
1. Register a new user account
2. Check Firebase Console → Authentication to verify user creation
3. Check Firebase Console → Realtime Database to verify data storage
4. Login with the created account
5. Add meals and update profile to test data persistence

